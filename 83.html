<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hyperion IT Service Console Calculator</title>
    <!-- Load Inter font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* ============================================================
          CSS Resets & Base Styles (1px Border Radius enforced)
          ============================================================
        */
        :root {
            -moz-tab-size: 4;
            -o-tab-size: 4;
            tab-size: 4;
            -webkit-tap-highlight-color: transparent;
        }

        *,
        ::before,
        ::after {
            box-sizing: border-box;
            border-width: 0;
            border-style: solid;
            border-color: #e5e7eb;
        }

        html {
            line-height: 1.5;
            -webkit-text-size-adjust: 100%;
        }

        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
            line-height: inherit;
        }
        
        h1, h2, h3, h4, p, ul {
            margin: 0;
            padding: 0;
        }
        
        ul {
            list-style: none;
        }
        
        /* Enforce 1px radius globally on all elements that had radius */
        .hprn-pricing-body,
        .hprn-estimate-bar,
        .hprn-pricing-btn-secondary,
        .hprn-pricing-feature-card,
        .hprn-pricing-sidebar-box,
        .hprn-service-list-item input[type="checkbox"],
        .hprn-calc-input,
        .hprn-calc-select,
        .hprn-calc-checkbox {
            border-radius: 1px !important; 
        }

        /* ============================================================
          General Container & Header
          ============================================================
        */
        .hprn-pricing-body {
            background-color: #f3f4f6; /* bg-gray-100 */
        }
        .hprn-pricing-container {
            width: 100%;
            max-width: 80rem; /* max-w-7xl */
            margin-left: auto;
            margin-right: auto;
            padding-left: 1rem;
            padding-right: 1rem;
        }

        @media (min-width: 640px) {
            .hprn-pricing-container { padding-left: 1.5rem; padding-right: 1.5rem; }
        }

        .hprn-pricing-hero {
            background-color: #0f172a;
            color: #ffffff;
            padding-top: 2rem;
            padding-bottom: 2rem;
        }
        .hprn-pricing-hero-text h1 {
            font-size: 1.5rem; 
            font-weight: 700;
            color: #ffffff;
        }
        .hprn-pricing-hero-text p {
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: #94a3b8;
        }

        /* Estimate Display Bar */
        .hprn-estimate-bar {
            background-color: #1e293b; 
            padding: 1rem;
            color: #ffffff;
            margin-top: 1.5rem;
            box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        
        @media (min-width: 640px) {
             .hprn-estimate-bar { 
                flex-direction: row; 
                justify-content: space-between; 
                align-items: center; 
            }
        }
        .hprn-estimate-bar-group {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 0.75rem;
        }
        @media (min-width: 640px) {
            .hprn-estimate-bar-group {
                 flex-direction: row;
                 align-items: baseline;
                 gap: 1.5rem;
            }
        }

        .hprn-estimate-bar h3 {
            font-size: 0.875rem;
            font-weight: 500;
            color: #cbd5e1;
        }
        .hprn-estimate-bar .total-amount {
            font-size: 1.5rem; 
            font-weight: 800;
            color: #f97316; /* Orange */
        }
        .hprn-estimate-bar .total-amount-secondary {
            font-size: 1.125rem; 
            font-weight: 700;
            color: #e2e8f0; 
        }
        .hprn-pricing-btn-secondary {
            background-color: #334155; 
            border: 1px solid #475569; 
            color: #f1f5f9; 
            font-weight: 600;
            padding: 0.5rem 1rem;
            transition: all 0.2s;
            cursor: pointer;
            font-size: 0.875rem;
            white-space: nowrap;
        }
        .hprn-pricing-btn-secondary:hover { background-color: #475569; }


        /* ============================================================
          Main Content Section (Mobile First Stacking)
          ============================================================
        */
        .hprn-pricing-main-wrapper {
            background-color: #ffffff;
        }
        .hprn-pricing-main-wrapper > .hprn-pricing-container {
            padding-top: 2rem;
            padding-bottom: 4rem;
        }

        /* Flex Container (Mobile: stacks, Desktop: side-by-side) */
        .hprn-console-flex {
            display: flex;
            flex-direction: column; /* Stacks on mobile */
            gap: 2rem;
        }
        
        /* === Service Selector (Sidebar) === */
        .hprn-pricing-sidebar {
            width: 100%; /* Full width on mobile */
        }
        .hprn-pricing-sidebar-box {
            background-color: #f9fafb;
            padding: 1.5rem;
            border: 1px solid #e5e7eb;
            margin-bottom: 1.5rem;
        }
        .hprn-pricing-sidebar-box h3 {
            font-size: 1rem;
            font-weight: 700;
            color: #111827;
            margin-bottom: 0.5rem;
         }
        .hprn-service-list h4 {
            font-size: 0.875rem;
            font-weight: 600;
            color: #64748b;
            margin-top: 1rem;
            padding-bottom: 0.25rem;
            border-bottom: 1px solid #e5e7eb;
        }
        .hprn-service-list-item {
            display: flex;
            align-items: center;
            padding: 0.5rem 0.25rem;
            cursor: pointer;
        }
        .hprn-service-list-item:hover { background-color: #f3f4f6; }
        .hprn-service-list-item input[type="checkbox"] {
            width: 1.25rem;
            height: 1.25rem;
            margin-right: 0.75rem;
            cursor: pointer;
            accent-color: #f97316; /* Orange accent */
        }
        .hprn-service-list-item label {
            font-weight: 500;
            font-size: 0.9375rem;
            color: #374151;
            flex-grow: 1;
            cursor: pointer;
        }
        
        /* === Service Configuration Details === */
        .hprn-pricing-main-content {
            width: 100%; /* Full width on mobile */
        }
        .hprn-pricing-main-content h2 {
            font-size: 1.5rem;
            font-weight: 700;
            color: #111827;
            margin-bottom: 0.5rem;
        }
        .hprn-pricing-main-content p.section-description {
            color: #4b5563;
            margin-bottom: 2rem;
            font-size: 0.9375rem;
        }
        /* Grouping Title for Config Cards */
        .config-group-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1e293b;
            margin-top: 3rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #94a3b8;
            padding-bottom: 0.5rem;
        }

        .hprn-pricing-feature-card {
            border: 1px solid #e5e7eb;
            padding: 1.5rem;
            background-color: #ffffff;
            box-shadow: 0 1px 1px 0 rgb(0 0 0 / 0.05);
            margin-bottom: 1rem; /* Closer spacing within groups */
        }
        .hprn-pricing-feature-card h3 {
            font-size: 1.125rem;
            font-weight: 700;
            color: #111827;
            margin-bottom: 1.5rem;
            border-bottom: 2px solid #f97316; /* Orange underline */
            padding-bottom: 0.5rem;
        }

        /* === Desktop Media Query (lg) === */
        @media (min-width: 1024px) { 
            .hprn-pricing-main-wrapper > .hprn-pricing-container {
                padding-top: 4rem;
                padding-bottom: 6rem;
            }
            .hprn-console-flex {
                flex-direction: row; /* Side-by-side on desktop */
                align-items: flex-start; /* Align top */
            }
            .hprn-pricing-main-content {
                width: 66.666667%; /* 2/3 width for Config Details */
            }
            .hprn-pricing-sidebar {
                width: 33.333333%; /* 1/3 width for Service Selector */
            }
            /* Make the sidebar sticky on desktop */
            .hprn-pricing-sidebar-box {
                position: sticky;
                top: 2rem; /* Position below the header */
            }
        }
        
        /* ============================================================
          Input Styles 
          ============================================================
        */
        .hprn-calc-input-group {
            margin-bottom: 1.5rem;
        }
        .hprn-calc-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            font-size: 0.875rem;
            color: #374151;
            margin-bottom: 0.5rem;
        }
        .hprn-calc-price {
            font-weight: 500;
            color: #6b7280;
        }
        
        .hprn-calc-input,
        .hprn-calc-select {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid #d1d5db;
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.2s;
        }
        
        .hprn-calc-input:focus,
        .hprn-calc-select:focus {
            outline: none;
            border-color: #f97316;
            box-shadow: 0 0 0 1px rgba(249, 115, 22, 0.5); /* Smaller focus shadow for 1px theme */
        }
        .hprn-calc-checkbox {
            width: 1.5rem !important;
            height: 1.5rem;
            min-width: 1.5rem;
            padding: 0;
            margin-left: 1rem;
            cursor: pointer;
        }
        .hprn-calc-checkbox:checked {
            background-color: #f97316;
            border-color: #f97316;
        }

        /* Footer */
        .hprn-pricing-footer {
            background-color: #e5e7eb;
            padding: 2rem 0;
            font-size: 0.875rem;
            color: #4b5563;
        }
        .hprn-pricing-footer h4 {
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
    </style>
</head>
<body class="hprn-pricing-body">

    <!-- 
      ============================================================
      Header & Estimate Bar 
      ============================================================
    -->
    <header class="hprn-pricing-hero">
        <div class="hprn-pricing-container">
            <!-- Header Text Content -->
            <div class="hprn-pricing-hero-text">
                <h1>Hyperion IT Service Console</h1>
                <p>Build your professional cost estimate by selecting and configuring services.</p>
            </div>
            
            <!-- Estimate Display Bar -->
            <div class="hprn-estimate-bar">
                <div class="hprn-estimate-bar-group">
                    <h3>Estimated Monthly OpEx:</h3>
                    <span class="total-amount" id="total-monthly-display">R 0.00</span>
                    <h3>Estimated Once-Off CapEx:</h3>
                    <span class="total-amount-secondary" id="total-once-off-display">R 0.00</span>
                </div>
                <button type="reset" form="calc-form" class="hprn-pricing-btn-secondary">
                    Clear All Services
                </button>
            </div>
        </div>
    </header>

    <!-- 
      ============================================================
      Main Content (Service Configuration and Selection)
      ============================================================
    -->
    <main class="hprn-pricing-main-wrapper">
        <div class="hprn-pricing-container">
            <div class="hprn-console-flex">

                <!-- 
                    =======================================
                    TOP/RIGHT COLUMN: SERVICE SELECTION MENU
                    (Comes first in HTML for mobile flow)
                    =======================================
                -->
                <aside class="hprn-pricing-sidebar">
                    
                    <!-- Sidebar Card: Service Selector -->
                    <div class="hprn-pricing-sidebar-box">
                        <h3><span style="color: #f97316;">(1)</span> Select Services to Include</h3>
                        <p style="margin-bottom: 1rem; font-size: 0.9rem; color: #64748b;">Check the components you need for your estimate.</p>
                        
                        <div class="hprn-service-list">
                            
                            <h4>Compute & Data Services (OpEx)</h4>
                            <div class="hprn-service-list-item">
                                <input type="checkbox" id="check-servers" data-target="config-servers">
                                <label for="check-servers">Managed Virtual Servers</label>
                            </div>
                            <div class="hprn-service-list-item">
                                <input type="checkbox" id="check-storage" data-target="config-storage">
                                <label for="check-storage">Cloud Storage (HA)</label>
                            </div>
                            <div class="hprn-service-list-item">
                                <input type="checkbox" id="check-data-volume" data-target="config-data-volume">
                                <label for="check-data-volume">Data Processing & Analytics</label>
                            </div>

                            <h4>Networking & Connectivity (OpEx)</h4>
                            <div class="hprn-service-list-item">
                                <input type="checkbox" id="check-fibre" data-target="config-fibre">
                                <label for="check-fibre">Dedicated Business Fibre</label>
                            </div>
                            <div class="hprn-service-list-item">
                                <input type="checkbox" id="check-vpn" data-target="config-vpn">
                                <label for="check-vpn">Managed VPN Tunnels</label>
                            </div>
                            
                            <h4>Fixed-Tier Plans (OpEx)</h4>
                            <div class="hprn-service-list-item">
                                <input type="checkbox" id="check-security" data-target="config-security">
                                <label for="check-security">Cybersecurity Plan (SOCaaS)</label>
                            </div>
                            <div class="hprn-service-list-item">
                                <input type="checkbox" id="check-support-plan" data-target="config-support-plan">
                                <label for="check-support-plan">IT Support Plan (SLA)</label>
                            </div>

                            <h4>Once-Off CapEx Services</h4>
                            <div class="hprn-service-list-item">
                                <input type="checkbox" id="check-hardware" data-target="config-hardware">
                                <label for="check-hardware">Hardware Procurement</label>
                            </div>
                            <div class="hprn-service-list-item">
                                <input type="checkbox" id="check-dev-hours" data-target="config-dev-hours">
                                <label for="check-dev-hours">Project Development Hours</label>
                            </div>
                        </div>

                    </div>
                    
                    <!-- Sidebar Card: Info -->
                    <div class="hprn-pricing-sidebar-box">
                         <h3>
                            <span style="color: #f97316;">(2)</span> Cost Assumptions
                        </h3>
                        <p style="font-size: 0.875rem; color: #64748b;">
                            Prices are **estimates in South African Rands (ZAR)** and exclude VAT. OpEx is monthly recurring, CapEx is once-off.
                        </p>
                    </div>

                </aside>
                
                <!-- 
                    =======================================
                    BOTTOM/LEFT COLUMN: CONFIGURATION DETAILS
                    =======================================
                -->
                <form class="hprn-pricing-main-content" id="calc-form">
                    <h2>Configuration Details</h2>
                    <p class="section-description">Set the desired quantities, tiers, and specifications for all selected services.</p>

                    <!-- Group 1: Compute & Data -->
                    <div class="config-group-title">Compute & Data Resources (OpEx)</div>
                    
                    <!-- SERVICE BLOCK: Servers (Compute) -->
                    <div class="hprn-pricing-feature-card service-block" id="config-servers">
                        <h3>Managed Virtual Servers (VMs)</h3>
                        <div class="hprn-calc-input-group">
                            <label for="servers-num" class="hprn-calc-label">
                                <span>Number of VM Instances</span>
                                <span class="hprn-calc-price">R 1,500.00 /VM/mo</span>
                            </label>
                            <input type="number" name="servers-num" id="servers-num" class="hprn-calc-input" min="0" max="50" value="0">
                        </div>
                    </div>

                    <!-- SERVICE BLOCK: Storage -->
                    <div class="hprn-pricing-feature-card service-block" id="config-storage">
                        <h3>High-Availability Cloud Storage</h3>
                        <div class="hprn-calc-input-group">
                            <label for="storage-num" class="hprn-calc-label">
                                <span>Total Provisioned Storage (in GB)</span>
                                <span class="hprn-calc-price">R 2.00 /GB/mo</span>
                            </label>
                            <input type="number" name="storage-num" id="storage-num" class="hprn-calc-input" min="0" max="2000" value="0" step="50">
                        </div>
                    </div>
                    
                    <!-- SERVICE BLOCK: Data & Analytics -->
                    <div class="hprn-pricing-feature-card service-block" id="config-data-volume">
                        <h3>Managed Data Processing Volume</h3>
                        <div class="hprn-calc-input-group">
                            <label for="data-volume-num" class="hprn-calc-label">
                                <span>Estimated Monthly Data Volume (in TB)</span>
                                <span class="hprn-calc-price">R 1,200.00 /TB/mo</span>
                            </label>
                            <input type="number" name="data-volume-num" id="data-volume-num" class="hprn-calc-input" min="0" max="100" value="0" step="1">
                        </div>
                    </div>
                    
                    <!-- Group 2: Networking -->
                    <div class="config-group-title">Networking & Connectivity (OpEx)</div>

                    <!-- SERVICE BLOCK: Network Fibre -->
                    <div class="hprn-pricing-feature-card service-block" id="config-fibre">
                        <h3>Dedicated Business Fibre Capacity</h3>
                        <div class="hprn-calc-input-group">
                            <label for="fibre-num" class="hprn-calc-label">
                                <span>Provisioned Bandwidth (Mbps)</span>
                                <span class="hprn-calc-price">R 50.00 /Mbps/mo</span>
                            </label>
                            <input type="number" name="fibre-num" id="fibre-num" class="hprn-calc-input" min="0" max="1000" value="0" step="50">
                        </div>
                    </div>

                    <!-- SERVICE BLOCK: Network VPN -->
                    <div class="hprn-pricing-feature-card service-block" id="config-vpn">
                        <h3>Managed VPN Tunnels</h3>
                        <div class="hprn-calc-input-group">
                            <label for="vpn-num" class="hprn-calc-label">
                                <span>Number of Site-to-Site Tunnels</span>
                                <span class="hprn-calc-price">R 250.00 /tunnel/mo</span>
                            </label>
                            <input type="number" name="vpn-num" id="vpn-num" class="hprn-calc-input" min="0" max="100" value="0" step="1">
                        </div>
                    </div>
                    
                    <!-- Group 3: Fixed-Tier Plans -->
                    <div class="config-group-title">Fixed-Tier Plans (OpEx)</div>

                    <!-- SERVICE BLOCK: Managed Cybersecurity Plan (Select) -->
                    <div class="hprn-pricing-feature-card service-block" id="config-security">
                        <h3>Managed Cybersecurity Plan (SOCaaS)</h3>
                        <div class="hprn-calc-input-group">
                             <label for="security-plan" class="hprn-calc-label" style="display: none;">Security Plan Tier</label>
                             <select name="security-plan" id="security-plan" class="hprn-calc-select hprn-calc-input" form="calc-form">
                                 <option value="0">0 - Baseline Endpoint Protection (R 0.00 /mo)</option>
                                 <option value="10000">1 - Standard Endpoint Protection & Patching (R 10,000.00 /mo)</option>
                                 <option value="25000">2 - Advanced Threat Hunting & EDR (R 25,000.00 /mo)</option>
                                 <option value="75000">3 - Complete SOCaaS & Compliance (R 75,000.00 /mo)</option>
                             </select>
                        </div>
                    </div>

                    <!-- SERVICE BLOCK: Support Plan (Select) -->
                    <div class="hprn-pricing-feature-card service-block" id="config-support-plan">
                        <h3>Comprehensive IT Support Plan (SLA)</h3>
                        <div class="hprn-calc-input-group">
                             <label for="support-plan" class="hprn-calc-label" style="display: none;">Support Plan Tier</label>
                             <select name="support-plan" id="support-plan" class="hprn-calc-select hprn-calc-input" form="calc-form">
                                 <option value="0">0 - None / Break-Fix Only (R 0.00 /mo)</option>
                                 <option value="5000">1 - Basic 8/5 Helpdesk (R 5,000.00 /mo)</option>
                                 <option value="15000">2 - Pro 24/7 Monitoring & Escalation (R 15,000.00 /mo)</option>
                                 <option value="40000">3 - Enterprise Full Managed Services (R 40,000.00 /mo)</option>
                             </select>
                        </div>
                    </div>
                    
                    <!-- Group 4: Once-Off CapEx -->
                    <div class="config-group-title">Once-Off Capital Expenditure (CapEx)</div>

                    <!-- SERVICE BLOCK: Dev Hours -->
                    <div class="hprn-pricing-feature-card service-block" id="config-dev-hours">
                        <h3>Custom Development & Consulting</h3>
                        <div class="hprn-calc-input-group">
                            <label for="dev-hours-num" class="hprn-calc-label">
                                <span>Required Project Development Hours</span>
                                <span class="hprn-calc-price">R 850.00 /hour</span>
                            </label>
                            <input type="number" name="dev-hours-num" id="dev-hours-num" class="hprn-calc-input" min="0" max="500" value="0" step="5">
                        </div>
                    </div>
                    
                    <!-- SERVICE BLOCK: Hardware -->
                    <div class="hprn-pricing-feature-card service-block" id="config-hardware">
                        <h3>Hardware Procurement & Installation</h3>
                        <div class="hprn-calc-input-group">
                            <label for="workstations-num" class="hprn-calc-label">
                                <span>Premium Workstations Procured</span>
                                <span class="hprn-calc-price">R 25,000.00 /unit</span>
                            </label>
                            <input type="number" name="workstations-num" id="workstations-num" class="hprn-calc-input" min="0" max="50" value="0" step="1">
                        </div>
                        <div class="hprn-calc-input-group">
                            <label for="switches-num" class="hprn-calc-label">
                                <span>Managed Enterprise Switches (24-Port)</span>
                                <span class="hprn-calc-price">R 12,000.00 /unit</span>
                            </label>
                            <input type="number" name="switches-num" id="switches-num" class="hprn-calc-input" min="0" max="10" value="0" step="1">
                        </div>
                        <!-- Installation Fee Checkbox -->
                        <div class="hprn-calc-input-group">
                            <div style="display: flex; align-items: center; justify-content: space-between; padding-top: 0.5rem; border-top: 1px solid #e5e7eb; margin-top: 1rem;">
                                <label for="install-check" class="hprn-calc-label" style="margin-bottom: 0; font-size: 1rem;">
                                    <span>**Premium On-Site Installation** (Fixed Fee)</span>
                                </label>
                                <input type="checkbox" name="install-check" id="install-check" class="hprn-calc-checkbox">
                            </div>
                            <p style="font-size: 0.875rem; color: #6b7280; margin-top: 0.5rem;">
                                Covers complex cabling and network integration (R 18,000.00 once-off).
                            </p>
                        </div>
                    </div>
                    
                </form>
            </div>
        </div>
    </main>

    <!-- 
      ============================================================
      Footer Section
      ============================================================
    -->
    <footer class="hprn-pricing-footer">
        <div class="hprn-pricing-container">
            <h4>Disclaimer</h4>
            <p>
                The Hyperion IT Cost Calculator is for illustrative purposes only. Your final fees depend on final project scope, usage, and market conditions. Contact us for a formal, binding quotation.
            </p>
        </div>
    </footer>

    <!-- 
      ============================================================
      JavaScript for Calculator Logic and UI Toggling
      ============================================================
    -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- Define Prices (ZAR) ---
            const PRICES = {
                server: 1500,
                storage: 2, // per GB
                devHour: 850,
                dataTB: 1200,
                fibreMbps: 50,
                vpnTunnel: 250,
                workstation: 25000,
                switch: 12000,
                premiumInstall: 18000
            };

            // --- Get Elements ---
            const calcForm = document.getElementById('calc-form');
            
            // Configuration Inputs (using name attribute for simpler selection)
            const inputs = {
                serverCount: document.getElementById('servers-num'),
                storageAmount: document.getElementById('storage-num'),
                dataVolume: document.getElementById('data-volume-num'),
                fibreMbps: document.getElementById('fibre-num'),
                vpnTunnels: document.getElementById('vpn-num'),
                supportCost: document.getElementById('support-plan'),
                securityCost: document.getElementById('security-plan'),
                devHours: document.getElementById('dev-hours-num'),
                workstations: document.getElementById('workstations-num'),
                switches: document.getElementById('switches-num'),
                premiumInstallCheck: document.getElementById('install-check')
            };

            // Outputs
            const monthlyDisplay = document.getElementById('total-monthly-display');
            const onceOffDisplay = document.getElementById('total-once-off-display');

            // Service Selector Checkboxes and Config Blocks
            const serviceCheckboxes = document.querySelectorAll('.hprn-service-list-item input[type="checkbox"]');
            const configBlocks = document.querySelectorAll('.service-block');

            // --- Helper Functions ---

            // Format number as ZAR
            function formatCurrency(value) {
                return new Intl.NumberFormat('en-ZA', { 
                    style: 'currency', 
                    currency: 'ZAR',
                    minimumFractionDigits: 2 
                }).format(value);
            }

            // Function to reset input values when a service is deselected
            function resetServiceInputs(blockId) {
                const block = document.getElementById(blockId);
                if (block) {
                    // Reset number inputs to 0
                    block.querySelectorAll('input[type="number"]').forEach(input => input.value = 0);
                    // Reset select inputs to the first option (value 0)
                    block.querySelectorAll('select').forEach(select => select.value = 0);
                    // Reset checkboxes
                    block.querySelectorAll('input[type="checkbox"]').forEach(checkbox => checkbox.checked = false);
                }
            }

            // --- UI Toggling Logic ---
            function handleServiceToggle(event) {
                const checkbox = event.target;
                const configBlockId = checkbox.getAttribute('data-target');
                const configBlock = document.getElementById(configBlockId);

                if (!configBlock) return;

                if (checkbox.checked) {
                    // Show the configuration block
                    configBlock.style.display = 'block';
                } else {
                    // Hide the configuration block
                    configBlock.style.display = 'none';
                    // Reset all inputs in this block to 0 when hidden
                    resetServiceInputs(configBlockId);
                }
                
                // Recalculate totals after show/hide/reset
                calculateTotal();
            }

            // --- Main Calculation Function ---
            function calculateTotal() {
                let totalMonthly = 0;
                let totalOnceOff = 0;
                
                // --- Monthly Operating Expenditure (OpEx) ---
                
                // 1. Managed Virtual Servers
                if (document.getElementById('check-servers').checked) {
                    const serverCount = parseFloat(inputs.serverCount.value) || 0;
                    totalMonthly += serverCount * PRICES.server;
                }

                // 2. High-Availability Cloud Storage
                if (document.getElementById('check-storage').checked) {
                    const storageAmount = parseFloat(inputs.storageAmount.value) || 0;
                    totalMonthly += storageAmount * PRICES.storage;
                }
                
                // 3. Managed Data Processing
                if (document.getElementById('check-data-volume').checked) {
                    const dataVolume = parseFloat(inputs.dataVolume.value) || 0;
                    totalMonthly += dataVolume * PRICES.dataTB;
                }
                
                // 4. Dedicated Business Fibre
                if (document.getElementById('check-fibre').checked) {
                    const fibreMbps = parseFloat(inputs.fibreMbps.value) || 0;
                    totalMonthly += fibreMbps * PRICES.fibreMbps;
                }
                
                // 5. Managed VPN Tunnels
                if (document.getElementById('check-vpn').checked) {
                    const vpnTunnels = parseFloat(inputs.vpnTunnels.value) || 0;
                    totalMonthly += vpnTunnels * PRICES.vpnTunnel;
                }
                
                // 6. Managed Cybersecurity Plan (Select Tier)
                if (document.getElementById('check-security').checked) {
                    const securityCost = parseFloat(inputs.securityCost.value) || 0;
                    totalMonthly += securityCost;
                }
                
                // 7. Comprehensive IT Support Plan (Select Tier)
                if (document.getElementById('check-support-plan').checked) {
                    const supportCost = parseFloat(inputs.supportCost.value) || 0;
                    totalMonthly += supportCost;
                }
                
                // --- Once-Off Capital Expenditure (CapEx) ---
                
                // 8. Project Development Hours
                if (document.getElementById('check-dev-hours').checked) {
                    const devHours = parseFloat(inputs.devHours.value) || 0;
                    totalOnceOff += devHours * PRICES.devHour;
                }

                // 9. Hardware Procurement (Workstations & Switches) + Installation Fee
                if (document.getElementById('check-hardware').checked) {
                    const workstations = parseFloat(inputs.workstations.value) || 0;
                    const switches = parseFloat(inputs.switches.value) || 0;
                    const premiumInstallCost = inputs.premiumInstallCheck.checked ? PRICES.premiumInstall : 0;
                    
                    totalOnceOff += (workstations * PRICES.workstation);
                    totalOnceOff += (switches * PRICES.switch);
                    totalOnceOff += premiumInstallCost;
                }


                // Update display
                monthlyDisplay.innerText = formatCurrency(totalMonthly);
                onceOffDisplay.innerText = formatCurrency(totalOnceOff);
            }

            // --- Event Listeners and Initial Setup ---
            
            // 1. Initial Setup: Hide all configuration blocks
            configBlocks.forEach(block => {
                block.style.display = 'none';
            });
            
            // 2. Add listener to all service selection checkboxes
            serviceCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', handleServiceToggle);
            });
            
            // 3. Add listener to all configuration inputs (Numbers, Selects, Checkboxes)
            Object.values(inputs).forEach(input => {
                input.addEventListener('input', calculateTotal);
            });

            // 4. Handle form reset
            calcForm.addEventListener('reset', (event) => {
                // Prevent default form reset to handle checkbox logic manually
                event.preventDefault(); 
                
                // Uncheck all service checkboxes and reset their config blocks
                serviceCheckboxes.forEach(checkbox => {
                    if (checkbox.checked) {
                         checkbox.checked = false; // Uncheck it
                         handleServiceToggle({ target: checkbox }); // Manually trigger the handler
                    }
                });
                
                // Reset all form inputs manually to ensure all states are cleared
                calcForm.reset();
                
                // Recalculate after reset
                calculateTotal(); 
            });

            // 5. Initial Calculation
            calculateTotal();

        });
    </script>

</body>
</html>
